{% extends "base.html" %}

{% block content %}
<section class="text-center py-10">
    <h1 class="text-3xl font-bold text-[#71A300]">Statistics</h1>
    <div class="mt-6 bg-white shadow-lg rounded-lg p-6">
        <!-- Controls for Borough and Timeframe -->
        <div class="flex justify-between items-center mb-6">
            <div>
                <label for="borough" class="text-lg font-bold text-[#71A300]">Borough:</label>
                <select id="borough" class="border border-gray-300 rounded p-2">
                    <option value="all">All Boroughs</option>
                    <option value="manhattan">Manhattan</option>
                    <option value="brooklyn">Brooklyn</option>
                    <option value="queens">Queens</option>
                    <option value="bronx">Bronx</option>
                    <option value="staten">Staten Island</option>
                </select>
            </div>
            <div>
                <label for="timeframe" class="text-lg font-bold text-[#71A300]">Timeframe:</label>
                <select id="timeframe" class="border border-gray-300 rounded p-2">
                    <option value="day">Day</option>
                    <option value="week">Week</option>
                    <option value="month">Month</option>
                </select>
            </div>
        </div>

        <!-- Chart Section -->
        <div class="chart-container mx-auto max-w-4xl">
            <canvas id="utilityChart" width="800" height="400"></canvas>
        </div>

        <!-- Legend -->
        <div class="flex justify-center mt-4">
            <div class="flex items-center space-x-6">
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-blue-500"></div>
                    <span class="ml-2">Energy Cost</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-yellow-500"></div>
                    <span class="ml-2">Natural Gas</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-red-500"></div>
                    <span class="ml-2">Steam</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-green-500"></div>
                    <span class="ml-2">Total Usage</span>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Ensure the chart displays correctly by initializing it dynamically
    document.addEventListener('DOMContentLoaded', function () {
        const ctx = document.getElementById('utilityChart').getContext('2d');

        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
                datasets: [
                    {
                        label: 'Energy Cost',
                        data: [50, 60, 55, 70, 65, 80, 75],
                        borderColor: 'blue',
                        backgroundColor: 'rgba(0, 0, 255, 0.1)',
                        fill: true,
                    },
                    {
                        label: 'Natural Gas',
                        data: [30, 40, 35, 50, 45, 55, 50],
                        borderColor: 'yellow',
                        backgroundColor: 'rgba(255, 215, 0, 0.1)',
                        fill: true,
                    },
                    {
                        label: 'Steam',
                        data: [20, 30, 25, 35, 30, 40, 35],
                        borderColor: 'red',
                        backgroundColor: 'rgba(255, 0, 0, 0.1)',
                        fill: true,
                    },
                    {
                        label: 'Total Usage',
                        data: [100, 130, 115, 155, 140, 175, 160],
                        borderColor: 'green',
                        backgroundColor: 'rgba(0, 255, 0, 0.1)',
                        fill: true,
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                    },
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Days',
                        },
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Usage',
                        },
                    },
                },
            },
        });
    });
</script>
{% endblock %}
