{% extends "base.html" %}

{% block content %}
<div class="container mx-auto py-10">
    <header class="text-center">
        <h1 class="text-4xl font-bold text-[#71A300]">SimpliSustain</h1>
        <p class="text-lg mt-2">Optimizing utility consumption in NYC through data-driven insights</p>
    </header>

    <div class="mt-8 bg-white shadow-lg rounded-lg p-6">
        <h2 class="text-2xl font-bold text-[#71A300] mb-4">Interactive NYC Energy Map</h2>
        <p class="mb-4">Toggle between total energy, natural gas, steam, and electricity usage heat maps, or view all combined.</p>

        <!-- Heatmap Controls -->
        <div class="flex justify-center space-x-4 mb-6">
            <button id="totalEnergyToggle" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                Show Total Energy
            </button>
            <button id="naturalGasToggle" class="px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700">
                Show Natural Gas
            </button>
            <button id="steamToggle" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                Show Steam
            </button>
            <button id="electricityToggle" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
                Show Electricity
            </button>
            <button id="combinedToggle" class="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">
                Show All Combined
            </button>
        </div>

        <!-- Heatmap Section -->
        <div class="relative bg-gray-200 border-2 border-gray-300 rounded-lg overflow-hidden h-96">
            <p class="absolute inset-0 flex items-center justify-center text-gray-500 text-lg" id="heatmapPlaceholder">
                Heatmap will display here.
            </p>
            <canvas id="heatmapCanvas" class="absolute inset-0"></canvas>
        </div>

        <!-- Legend -->
        <div class="mt-6">
            <h3 class="text-lg font-bold text-[#71A300] mb-2">Legend</h3>
            <div class="flex items-center space-x-6">
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-green-500"></div>
                    <span class="ml-2">Total Energy</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-yellow-500"></div>
                    <span class="ml-2">Natural Gas</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-blue-500"></div>
                    <span class="ml-2">Steam</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-red-500"></div>
                    <span class="ml-2">Electricity</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-purple-500"></div>
                    <span class="ml-2">All Combined</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const canvas = document.getElementById('heatmapCanvas');
    const placeholder = document.getElementById('heatmapPlaceholder');
    const ctx = canvas.getContext('2d');

    const totalEnergyToggle = document.getElementById('totalEnergyToggle');
    const naturalGasToggle = document.getElementById('naturalGasToggle');
    const steamToggle = document.getElementById('steamToggle');
    const electricityToggle = document.getElementById('electricityToggle');
    const combinedToggle = document.getElementById('combinedToggle');

    // Dummy heatmap drawing functions
    const drawHeatmap = (type) => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if (type === 'totalEnergy') {
            ctx.fillStyle = 'rgba(34, 139, 34, 0.5)'; // Green for Total Energy
        } else if (type === 'naturalGas') {
            ctx.fillStyle = 'rgba(255, 215, 0, 0.5)'; // Yellow for Natural Gas
        } else if (type === 'steam') {
            ctx.fillStyle = 'rgba(0, 0, 255, 0.5)'; // Blue for Steam
        } else if (type === 'electricity') {
            ctx.fillStyle = 'rgba(255, 0, 0, 0.5)'; // Red for Electricity
        } else if (type === 'combined') {
            ctx.fillStyle = 'rgba(128, 0, 128, 0.5)'; // Purple for All Combined
        }
        ctx.fillRect(50, 50, canvas.width - 100, canvas.height - 100);
        placeholder.style.display = 'none';
    };

    // Toggle button event listeners
    totalEnergyToggle.addEventListener('click', () => drawHeatmap('totalEnergy'));
    naturalGasToggle.addEventListener('click', () => drawHeatmap('naturalGas'));
    steamToggle.addEventListener('click', () => drawHeatmap('steam'));
    electricityToggle.addEventListener('click', () => drawHeatmap('electricity'));
    combinedToggle.addEventListener('click', () => drawHeatmap('combined'));
</script>
{% endblock %}
